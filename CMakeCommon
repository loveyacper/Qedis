set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-deprecated -g -D'GIT_COMMIT_ID=\"${GIT_COMMIT_ID}\"' -D'BUILD_TIME=\"${BUILD_TIME}\"'")

set(CMAKE_CXX_STANDARD 17)

if(${CMAKE_BUILD_TYPE} MATCHES "Release")
    message(STATUS "make RELEASE version")
    add_definitions(-DBUILD_RELEASE)
    set(BuildType "Release")
else()
    message(STATUS "make DEBUG version")
    add_definitions(-DBUILD_DEBUG)
    set(BuildType "Debug")
endif()

include(FetchContent)

# leveldb
FetchContent_Declare(
    leveldb
    GIT_REPOSITORY https://github.com/google/leveldb.git
    GIT_TAG main
)
set(LEVELDB_BUILD_TESTS OFF CACHE BOOL "" FORCE)
set(LEVELDB_BUILD_BENCHMARKS OFF CACHE BOOL "" FORCE)
set(LEVELDB_INSTALL OFF CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(leveldb)

if(${CMAKE_BUILD_TYPE} MATCHES "Release")
    message(STATUS "make RELEASE version")
    add_definitions(-DBUILD_RELEASE)
    set(BuildType "Release")
else()
    message(STATUS "make DEBUG version")
    add_definitions(-DBUILD_DEBUG)
    set(BuildType "Debug")
endif()

